<template name="currencyConverter">
  {{#autoForm collection='Trades' id='insertTradeForm' type='insert' class='form-horizontal'}}
    <!-- <div class="row">
      <div class="col-sm-6">
        <div class="form-group">
          <label class="col-sm-2 control-label">{{afFieldLabelText name='fromCurrency'}}</label>
          <div class="col-sm-10">
            {{> afFieldInput name='fromCurrency' value=fromCurrency}}
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="form-group">
          <label class="col-sm-2 control-label">{{afFieldLabelText name='toCurrency'}}</label>
          <div class="col-sm-10">
            {{> afFieldInput name='toCurrency' value=toCurrency}}
          </div>
        </div>
      </div>
    </div> -->
    <h1 class="text-right" style="font-size: 9vw; margin-top: 0">
      <strong>{{companyPrice}}</strong> <small>{{mainCurrency}}</small>
    </h1>
    <div class="progress" style="height: 5px; margin-bottom: 35px">
      <div class="progress-bar" role="progressbar" aria-valuenow="{{percentageLeft}}" aria-valuemin="0" aria-valuemax="100" style="width: {{percentageLeft}}%;">
        <span class="sr-only">{{percentageLeft}}% Complete</span>
      </div>
    </div>
    <!-- <div class="form-group {{#if afFieldIsInvalid name='marketValueCurrency'}}has-error{{/if}}">
      <label class="col-sm-1 control-label">{{afFieldLabelText name='marketValueCurrency'}}</label>
      <div class="col-sm-11">
        {{> afFieldInput name='marketValueCurrency'}}
        {{#if afFieldIsInvalid name='marketValueCurrency'}}
          <span class="help-block">{{{afFieldMessage name='marketValueCurrency'}}}</span>
        {{/if}}
      </div>
    </div> -->
    <div class="row">
      <div class="col-sm-6">
        <div class="form-group form-group-lg {{#if afFieldIsInvalid name='fromAmount'}}has-error{{/if}}">
          <label class="col-sm-2 control-label">{{afFieldLabelText name='fromAmount'}}</label>
          <div class="col-sm-10">
            <div class="input-group input-group-lg">
              {{> afFieldInput name='fromAmount' value=fromAmount class='form-control text-right' autofocus=''}}
              <span class="input-group-addon">{{fromCurrency}}</span>
            </div>
          </div>
          {{#if afFieldIsInvalid name='fromAmount'}}
            <span class="help-block">{{{afFieldMessage name='fromAmount'}}}</span>
          {{/if}}
        </div>
        <div class="form-group">
          <label class="col-sm-2 control-label">{{afFieldLabelText name='memberPaymentMethod'}}</label>
          <div class="col-sm-10">
            {{> afFieldInput name='memberPaymentMethod' value=memberPaymentMethod placeholder='How do you want to pay?'}}
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="form-group form-group-lg {{#if afFieldIsInvalid name='toAmount'}}has-error{{/if}}">
          <label class="col-sm-2 control-label">{{afFieldLabelText name='toAmount'}}</label>
          <div class="col-sm-10">
            <div class="input-group input-group-lg">
              {{> afFieldInput name='toAmount' value=toAmount class='form-control text-right' step='0.0001'}}
              <span class="input-group-addon">{{toCurrency}}</span>
            </div>
            {{#if afFieldIsInvalid name='toAmount'}}
              <span class="help-block">{{{afFieldMessage name='toAmount'}}}</span>
            {{/if}}
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 control-label">{{afFieldLabelText name='companyPaymentMethod'}}</label>
          <div class="col-sm-10">
            {{> afFieldInput name='companyPaymentMethod' value=companyPaymentMethod placeholder='How do you want to get paid?'}}
          </div>
        </div>
      </div>
    </div>
    <hr>
    <h2 class="text-right">
      Flat fee = {{formatCAD flatFee}}
    </h2>
    {{#if memberPaymentMethodFee}}
      <h2 class="text-right">
        {{memberPaymentMethod}} fee = {{formatCAD memberPaymentMethodFee}}
      </h2>
    {{/if}}
    {{#if fromAmount}}
      <h2 class="text-right">
        Sales tax = {{formatCAD tax}}
      </h2>
    {{/if}}
    {{#if toAmount}}
    <hr>
    <p class="lead text-muted text-right">
      Flat fee
      {{#if memberPaymentMethodFee}}
      + {{memberPaymentMethod}} fee
      {{/if}}
      + Sales tax
      = {{formatCAD totalFees}}
    </p>
    <p class="lead text-muted text-right">
      {{formatCAD fromAmount}}
      - {{formatCAD totalFees}}
      = {{formatCAD amountMinusFees}}
    </p>
    <p class="lead text-muted text-right">
      {{formatCAD amountMinusFees}}
      &divide; {{formatCAD companyPrice}} =
      {{formatBTC toAmount}}
    </p>
    <hr>
    <h2 class="text-right">
      {{formatBTC toAmount}} â‰ˆ {{formatCAD marketValue}}
    </h2>
    {{/if}}
    <!-- <div class="form-group form-group-lg {{#if afFieldIsInvalid name='marketValue'}}has-error{{/if}}">
      <label class="col-sm-1 control-label">{{afFieldLabelText name='marketValue'}}</label>
      <div class="col-sm-11">
        <div class="input-group input-group-lg">
          {{> afFieldInput name='marketValue' value=marketValue class='form-control text-right'}}
          <span class="input-group-addon">{{marketValueCurrency}}</span>
        </div>
      </div>
      {{#if afFieldIsInvalid name='marketValue'}}
        <span class="help-block">{{{afFieldMessage name='marketValue'}}}</span>
      {{/if}}
    </div> -->
    <hr>
    <div class="form-group {{#if afFieldIsInvalid name='member'}}has-error{{/if}}">
      <label class="col-sm-1 control-label">{{afFieldLabelText name='member'}}</label>
      <div class="col-sm-11">
        {{> afFieldInput name='member' placeholder='What is your member number?'}}
        {{#if afFieldIsInvalid name='member'}}
          <span class="help-block">{{{afFieldMessage name='member'}}}</span>
        {{/if}}
      </div>
    </div>
    {{#if currentUser}}
      {{#if member}}
        <hr>
        <div class="form-group">
          <div class="col-sm-offset-1 col-sm-11">
            <button type="submit" class="btn btn-primary btn-lg">Submit Trade</button>
          </div>
        </div>
      {{/if}}
    {{/if}}
  {{/autoForm}}
</template>
